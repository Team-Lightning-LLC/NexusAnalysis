<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyze - Nexus Advisory</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/analyze.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Top Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 32 32">
                        <circle cx="16" cy="16" r="14" fill="none" stroke="#0052FF" stroke-width="2"/>
                        <circle cx="16" cy="16" r="4" fill="#0052FF"/>
                    </svg>
                </div>
                <span class="logo-text">NEXUS ADVISORY</span>
            </div>
            <div class="nav-links">
                <a href="index.html">Dashboard</a>
                <a href="upload.html">Upload</a>
                <a href="analyze.html" class="active">Analyze</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="analyze-layout">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <!-- Tab Navigation -->
            <div class="sidebar-tabs">
                <button class="tab-btn active" data-tab="documents">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M2 4a2 2 0 012-2h8l4 4v8a2 2 0 01-2 2H4a2 2 0 01-2-2V4z"/>
                    </svg>
                    Documents
                </button>
                <button class="tab-btn" data-tab="history">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M8 5v3l2 2"/>
                    </svg>
                    History
                </button>
            </div>

            <!-- Documents Tab Content -->
            <div class="tab-content" id="documents-tab">
                <div class="sidebar-header">
                    <h2>Documents</h2>
                    <button class="add-btn" title="Add document">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"/>
                        </svg>
                    </button>
                </div>

                <div class="document-list">
                    <div class="document-item active">
                        <div class="doc-icon">üìä</div>
                        <div class="doc-info">
                            <div class="doc-name">VMFXX</div>
                            <div class="doc-type">Money Market Fund</div>
                        </div>
                        <div class="doc-status">
                            <span class="status-dot active"></span>
                        </div>
                    </div>

                    <div class="document-item">
                        <div class="doc-icon">üìà</div>
                        <div class="doc-info">
                            <div class="doc-name">VMRXX</div>
                            <div class="doc-type">Money Market Fund</div>
                        </div>
                        <div class="doc-status">
                            <span class="status-dot"></span>
                        </div>
                    </div>

                    <div class="document-item">
                        <div class="doc-icon">üí∞</div>
                        <div class="doc-info">
                            <div class="doc-name">SPAXX</div>
                            <div class="doc-type">Money Market Fund</div>
                        </div>
                        <div class="doc-status">
                            <span class="status-dot"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab Content -->
            <div class="tab-content hidden" id="history-tab">
                <div class="sidebar-header">
                    <h2>History</h2>
                    <button class="new-chat-btn" onclick="startNewChat()">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 4a1 1 0 011 1v2h2a1 1 0 110 2H9v2a1 1 0 11-2 0V9H5a1 1 0 110-2h2V5a1 1 0 011-1z"/>
                        </svg>
                        New Chat
                    </button>
                </div>

                <div class="history-list">
                    <div class="history-item active">
                        <div class="history-title">Current Session</div>
                        <div class="history-meta">Started 2:34 PM ‚Ä¢ 1 message</div>
                        <div class="history-preview">Initial analysis request...</div>
                    </div>

                    <div class="history-item">
                        <div class="history-title">Fund Comparison</div>
                        <div class="history-meta">2 hours ago ‚Ä¢ 8 messages</div>
                        <div class="history-preview">Compared all three funds...</div>
                    </div>

                    <div class="history-item">
                        <div class="history-title">Risk Assessment</div>
                        <div class="history-meta">Yesterday ‚Ä¢ 12 messages</div>
                        <div class="history-preview">Deep dive into risk factors...</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Chat Area -->
        <section class="chat-area">
            <!-- Chat Header -->
            <header class="chat-header">
                <div class="header-left">
                    <h1>AI Financial Advisor</h1>
                    <div class="session-info">
                        <span class="session-id">Session #A7B3</span>
                        <span class="session-time">Started 2:34 PM</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="status">
                        <span class="status-indicator"></span>
                        <span>Ready to analyze</span>
                    </div>
                    <button class="export-btn" title="Export chat">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 15v3a1 1 0 001 1h12a1 1 0 001-1v-3M7 10l3 3 3-3M10 3v10"/>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Messages Area -->
            <div class="messages-container" id="messages">
                <div class="message assistant">
                    <div class="avatar">
                        <div class="ai-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 18a8 8 0 118-8 8 8 0 01-8 8zm0-13a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1zm0 8a1 1 0 100 2 1 1 0 000-2z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="message-content">
                        <p>Hello! I'm your AI financial advisor. I have access to the prospectuses for <strong>VMFXX</strong>, <strong>VMRXX</strong>, and <strong>SPAXX</strong>.</p>
                        <p>I can help you:</p>
                        <ul>
                            <li>Analyze individual fund characteristics</li>
                            <li>Compare funds side-by-side</li>
                            <li>Identify risks and opportunities</li>
                            <li>Answer specific questions about holdings, fees, or performance</li>
                        </ul>
                        <p>What would you like to know?</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="action-chip" onclick="sendQuickQuery(this)">
                    <span class="chip-icon">üéØ</span>
                    Analyze VMFXX comprehensively
                </button>
                <button class="action-chip" onclick="sendQuickQuery(this)">
                    <span class="chip-icon">‚öñÔ∏è</span>
                    Compare all three funds
                </button>
                <button class="action-chip" onclick="sendQuickQuery(this)">
                    <span class="chip-icon">üõ°Ô∏è</span>
                    Which fund has the lowest risk?
                </button>
                <button class="action-chip" onclick="sendQuickQuery(this)">
                    <span class="chip-icon">üí∞</span>
                    Explain fee structures
                </button>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="context-indicator">
                    <span>Analyzing:</span>
                    <span class="context-fund">VMFXX</span>
                    <button class="context-clear" onclick="clearContext()">√ó</button>
                </div>
                <div class="input-container">
                    <textarea 
                        id="messageInput" 
                        placeholder="Ask me anything about these funds..."
                        rows="1"
                    ></textarea>
                    <div class="input-actions">
                        <button class="input-btn" title="Attach file">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H9a1 1 0 01-1-1V7z"/>
                            </svg>
                        </button>
                        <button class="input-btn" title="Voice input">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 12a2 2 0 002-2V6a2 2 0 10-4 0v4a2 2 0 002 2z"/>
                                <path d="M6 10a4 4 0 108 0M10 12v4M8 16h4"/>
                            </svg>
                        </button>
                        <button class="send-btn" id="sendBtn">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="white">
                                <path d="M2 10l16-7-4 7 4 7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Floating Summary Button - Moved to avoid overlap -->
        <button class="summary-fab" onclick="showSummary()" title="View conversation summary" style="display: none;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V6a2 2 0 00-2-2zm0 16H5V9h14v11z"/>
            </svg>
        </button>
    </main>

    <!-- Conversation Summary Modal -->
    <div class="summary-modal" id="summaryModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Conversation Summary</h3>
                <button class="close-btn" onclick="closeSummary()">√ó</button>
            </div>
            <div class="modal-body">
                <section class="summary-section">
                    <h4>Key Topics Discussed</h4>
                    <div class="topic-tags">
                        <span class="tag">Yield Analysis</span>
                        <span class="tag">Risk Assessment</span>
                        <span class="tag">Fee Comparison</span>
                    </div>
                </section>

                <section class="summary-section">
                    <h4>Documents Referenced</h4>
                    <div class="doc-refs">
                        <div class="doc-ref">
                            <span>üìä VMFXX Prospectus</span>
                            <span class="pages">Pages 12-15, 23</span>
                        </div>
                        <div class="doc-ref">
                            <span>üìà VMRXX Annual Report</span>
                            <span class="pages">Pages 8-10</span>
                        </div>
                    </div>
                </section>

                <section class="summary-section">
                    <h4>Key Insights</h4>
                    <ul class="insights">
                        <li>VMFXX offers the best balance for retail investors</li>
                        <li>All funds maintain stable NAV with government securities</li>
                        <li>Expense ratios significantly impact net returns</li>
                    </ul>
                </section>

                <section class="summary-section">
                    <h4>Compliance Notes</h4>
                    <div class="compliance">
                        <p>‚úì All recommendations based on public prospectus data</p>
                        <p>‚úì Risk disclosures provided</p>
                        <p>‚úì No personalized investment advice given</p>
                    </div>
                </section>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" onclick="saveSummary()">Save to Records</button>
                <button class="btn primary" onclick="generateReport()">Generate Report</button>
            </div>
        </div>
    </div>

    <script src="js/analyze.js"></script>
</body>
</html>
